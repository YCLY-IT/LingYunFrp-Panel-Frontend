.n-card {
  border-radius: 15px !important;
  .n-card__action {
    border-radius: 0 0 15px 15px !important;
  }
}

.n-message {
  border-radius: 12px !important;
}

.n-tag {
  border-radius: 3px !important;
}

.n-alert {
  border-radius: 6px !important;
}

.n-dialog {
  border-radius: 13px !important;
}

.n-button {
  border-radius: 18px !important;
}

.n-base-selection {
  border-radius: 18px !important;
}

/* 对话框模糊效果 */
.n-modal-mask {
  backdrop-filter: blur(var(--modal-filter, 10px)) !important;
  -webkit-backdrop-filter: blur(var(--modal-filter, 10px)) !important;
}

.n-dialog-mask {
  backdrop-filter: blur(var(--modal-filter, 10px)) !important;
  -webkit-backdrop-filter: blur(var(--modal-filter, 10px)) !important;
}

/* 色弱模式 */
.color-blind-mode {
  filter: var(--color-blind-filter, none) !important;
}

/* 高对比度模式 */
.high-contrast-mode {
  filter: contrast(1.2) saturate(1.2) !important;
}

/* 色弱模式 + 高对比度模式 同时开启 */
.color-blind-mode.high-contrast-mode {
  filter: var(--color-blind-filter, none) contrast(1.2) saturate(1.2) !important;
}

.high-contrast-mode .n-card,
.high-contrast-mode .n-button,
.high-contrast-mode .n-input,
.high-contrast-mode .n-select,
.high-contrast-mode .n-switch {
  border-width: 2px !important;
  border-color: currentColor !important;
}

/* 背景图样式 */
body {
  background-image: var(--background-image, none);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  background-repeat: no-repeat;
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: var(--background-image, none);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  background-repeat: no-repeat;
  filter: blur(var(--background-blur, 0px));
  opacity: var(--background-opacity, 1);
  z-index: -1;
}

/* ========================================
   毛玻璃模式 - 统一样式
   ======================================== */

/* 毛玻璃模式基础 */
.frosted-glass-mode {
  transition: var(--frosted-glass-transition, none);
}

/* 毛玻璃模式下的卡片 */
.frosted-glass-mode .n-card {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* 毛玻璃模式下卡片的操作栏 */
.frosted-glass-mode .n-card .n-card__action {
  background: rgba(255, 255, 255, 0.08) !important;
  border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.5))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.5))
    saturate(180%) !important;
}

/* 毛玻璃模式下的消息提示 */
.frosted-glass-mode .n-message {
  background: rgba(255, 255, 255, 0.15) !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
}

.frosted-glass-mode .n-message.n-message--info {
  background: rgba(24, 144, 255, 0.15) !important;
  border-color: rgba(24, 144, 255, 0.3) !important;
}

.frosted-glass-mode .n-message.n-message--success {
  background: rgba(82, 196, 26, 0.15) !important;
  border-color: rgba(82, 196, 26, 0.3) !important;
}

.frosted-glass-mode .n-message.n-message--warning {
  background: rgba(250, 173, 20, 0.15) !important;
  border-color: rgba(250, 173, 20, 0.3) !important;
}

.frosted-glass-mode .n-message.n-message--error {
  background: rgba(255, 77, 79, 0.15) !important;
  border-color: rgba(255, 77, 79, 0.3) !important;
}

/* 毛玻璃模式下的模态框 */
.frosted-glass-mode .n-modal .n-card {
  background: #ffffff33 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 2))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.25) !important;
}

/* 毛玻璃模式下的对话框 */
.frosted-glass-mode .n-dialog {
  background: rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 2))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.25) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15) !important;
}

/* 毛玻璃模式下的侧边栏 */
.frosted-glass-mode .n-layout-sider {
  background: #ffffff2e !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  border-right: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* 隐藏侧边栏默认边框 */
.frosted-glass-mode .n-layout-sider .n-layout-sider__border {
  display: none !important;
}

/* 毛玻璃模式下的顶部栏 */
.frosted-glass-mode .n-layout-header {
  background: #ffffff2e !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* 毛玻璃模式下的抽屉 */
.frosted-glass-mode .n-drawer {
  background: #ffffff26 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
}

.frosted-glass-mode .n-drawer .n-drawer-content {
  background: #ffffff26 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.5))
    saturate(180%) !important;
}

/* 毛玻璃模式下抽屉内的卡片 */
.frosted-glass-mode .n-drawer .n-card {
  background: #ffffff1f !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* 毛玻璃模式下抽屉内的设置卡片 */
.frosted-glass-mode .n-drawer .setting-card {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.12) !important;
}

/* 毛玻璃模式下的表格 */
.frosted-glass-mode .n-data-table {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
}

.frosted-glass-mode .n-list .n-list-item {
  background: #ffffff14 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.6))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.6))
    saturate(180%) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* 毛玻璃模式下的描述列表 */
.frosted-glass-mode .n-descriptions {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  border-radius: 8px;
  padding: 16px;
}

.frosted-glass-mode .n-pagination .n-pagination-item {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.5))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.5))
    saturate(180%) !important;
}

/* 毛玻璃模式下的弹窗 */
.frosted-glass-mode .n-popover {
  background: #ffffff33 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
}

/* 毛玻璃模式下的下拉菜单 */
.frosted-glass-mode .n-dropdown-menu {
  background: #ffffff33 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
}

/* 毛玻璃模式下的输入框 */
.frosted-glass-mode .n-input {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* 毛玻璃模式下的下拉选择器 */
.frosted-glass-mode .n-select .n-base-selection {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

.frosted-glass-mode .n-select .n-base-selection--active {
  background: #ffffff26 !important;
  border-color: rgba(255, 255, 255, 0.25) !important;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1) !important;
}

.frosted-glass-mode .n-select .n-base-selection-label {
  background: transparent !important;
}

/* 毛玻璃模式下多选下拉框的标签 */
.frosted-glass-mode .n-base-selection-tags {
  background: transparent !important;
}

.frosted-glass-mode .n-base-selection-tag-wrapper {
  background: #ffffff26 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.6))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.6))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 4px !important;
}

/* 毛玻璃模式下下拉选择器的下拉菜单 */
.frosted-glass-mode .n-select-menu {
  background: #ffffff33 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
}

.frosted-glass-mode .n-base-selection-tag-wrapper .n-tag {
  background: transparent !important;
  border: none !important;
}

/* 毛玻璃模式下的自定义通知项 */
.frosted-glass-mode .notice-item {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.8))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

.frosted-glass-mode .notice-item:hover {
  background: #ffffff26 !important;
  box-shadow: 0 4px 16px var(--n-color-hover-shadow);
  transform: scale(1.02);
}

/* 毛玻璃模式下的信息卡片 */
.frosted-glass-mode .info-card,
.frosted-glass-mode .user-card,
.frosted-glass-mode .notice-card {
  background: #ffffff1f !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1.2))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.18) !important;
}

/* 毛玻璃模式下的仪表板网格卡片 */
.frosted-glass-mode .stat-card,
.frosted-glass-mode .chart-card,
.frosted-glass-mode .quick-action-card {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 1))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* 毛玻璃模式下的表单容器 */
.frosted-glass-mode .form-container,
.frosted-glass-mode .search-container,
.frosted-glass-mode .filter-container {
  background: #ffffff14 !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.6))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.6))
    saturate(180%) !important;
  border-radius: 8px;
  padding: 16px;
}

/* 毛玻璃模式下的详情面板 */
.frosted-glass-mode .detail-panel,
.frosted-glass-mode .info-panel {
  background: #ffffff1a !important;
  backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.9))
    saturate(180%) !important;
  -webkit-backdrop-filter: blur(calc(var(--frosted-glass-blur, 10px) * 0.9))
    saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: 8px;
}

/* ========================================
   主题切换扩散动画
   ======================================== */

.theme-transition-overlay {
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition:
    width 0.6s cubic-bezier(0.4, 0, 0.2, 1),
    height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* View Transition API 主题切换动画 */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

/* 默认层级：旧视图在下，新视图在上 */
::view-transition-old(root) {
  z-index: 1;
}

::view-transition-new(root) {
  z-index: 9999;
}

/* 确保 View Transition 期间内容不可交互 */
.view-transition-active {
  pointer-events: none;
}

/* 优化 View Transition 性能 */
::view-transition-group(root) {
  animation-duration: 0.6s;
}
